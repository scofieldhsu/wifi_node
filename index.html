<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>JavaScript Ajax Demo</title>

<style type="text/css"> 
input, button, select {
	margin-bottom: 10px;
}
</style>
</head>
<body onload="WlanEnumInterfaces()">

<p id="WlanOnLoad"></p>

<h1>查詢員工</h1>
<label for="keyword">請輸入員工編號：</label>
<input type="text" id="keyword">

<button id="search">查詢</button>
<p id="searchResult"></p>

<!--
<h1>新建員工</h1>
<label for="staffNumber">請輸入員工編號：</label>
<input type="text" id="staffNumber"><br>

<label for="staffName">請輸入員工姓名：</label>
<input type="text" id="staffName"><br>

<label for="staffSex">請輸入員工性別：</label>
<select id="staffSex">
	<option value="男">男</option>
	<option value="女">女</option>
</select><br>

<button id="save">保存</button>
<p id="createResult"></p>
-->

<!--
<form method="post" action="/">
<input type ="submit" name="wlan" value="WlanGetAvailableNetworkList"/>
	get available wifi network list<br><br>
<input type ="submit" name="wlan" value="WlanEnumInterfaces"/>
	get available wifi network list<br><br>
</form>
-->
<div id="formContainer"></div>

<button id="WlanEnumInterfaces">enumalte wifi interfaces</button>
<button id="WlanGetAvailableNetworkList">get available wifi network list</button>
<button id="WlanGetNotifications">get wifi notifications</button>
<p id="WlanResult"></p>

<script type="text/JavaScript">
var form1 = '<form id="myform" method="post" action="" onsubmit="alert(this.mytextfield.value)">';
form1 += 'text field: <input type="text" name="mytextfield"><br>'
form1 += '<input type="submit" value="send it now!"></form><br>';

document.getElementById("search").onclick = function() {
	// 發送 Ajax 查詢請求並處理
	var request = new XMLHttpRequest();
	
	//request.open("GET", "service.php?number=" + document.getElementById("keyword").value);
	request.open("GET", "/?number=" + document.getElementById("keyword").value);//scofield
	
	request.send();

	request.onreadystatechange = function() {
		// 伺服器請求完成
		if (request.readyState === 4) {
			// 伺服器回應成功
			if (request.status === 200) {
				var type = request.getResponseHeader("Content-Type");	// 取得回應類型

				// 判斷回應類型，這裡使用 JSON
				if (type.indexOf("application/json") === 0) {				
					var data = JSON.parse(request.responseText);

					if (data.number) {
						document.getElementById("searchResult").innerHTML = '[找到員工] 員工編號：' +data.number + ', 姓名：' +
																				data.name + ', 性別：' + data.sex;
						document.getElementById("formContainer").innerHTML = form1;
					} else {
						document.getElementById("searchResult").innerHTML = data.msg;
					}
				}
			} else {
				alert("發生錯誤: " + request.status);
			}
		}
	}
}

/*
document.getElementById("save").onclick = function() {
	// 發送 Ajax 查詢請求並處理
	var request = new XMLHttpRequest();
	request.open("POST", "service.php");

	// POST 參數須使用 send() 發送
	var data = "name=" + document.getElementById("staffName").value +
				"&number=" + document.getElementById("staffNumber").value +
				"&sex=" + document.getElementById("staffSex").value;

	// POST 請求必須設置表頭在 open() 下面，send() 上面
	request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
	request.send(data);

	request.onreadystatechange = function() {
		// 伺服器請求完成
		if (request.readyState === 4) {
			// 伺服器回應成功
			if (request.status === 200) {
				var type = request.getResponseHeader("Content-Type");	// 取得回應類型

				// 判斷回應類型，這裡使用 JSON
				if (type.indexOf("application/json") === 0) {				
					var data = JSON.parse(request.responseText);

					if (data.name) {
						document.getElementById("createResult").innerHTML = '員工：' + data.name + '，儲存成功！';
					} else {
						document.getElementById("createResult").innerHTML = data.msg;
					}
				}
			} else {
				alert("發生錯誤" + request.status);
			}
		}
	}
}
*/

document.getElementById("WlanGetAvailableNetworkList").onclick = function() {
//alert("WlanGetAvailableNetworkList ");
	// 發送 Ajax 查詢請求並處理
	var request = new XMLHttpRequest();
	
	request.open("GET", "/getAvailableNetworkList");//scofield
	
	request.send();

	request.onreadystatechange = function() {
		// 伺服器請求完成
		if (request.readyState === 4) {
			// 伺服器回應成功
			if (request.status === 200) {
				/*var type = request.getResponseHeader("Content-Type");	// 取得回應類型

				// 判斷回應類型，這裡使用 JSON
				if (type.indexOf("application/json") === 0) {				
					var data = JSON.parse(request.responseText);

					if (data.number) {
						document.getElementById("searchResult").innerHTML = '[找到員工] 員工編號：' +data.number + ', 姓名：' +
																				data.name + ', 性別：' + data.sex;
					} else {
						document.getElementById("searchResult").innerHTML = data.msg;
					}
				}*/
				document.getElementById("WlanResult").innerHTML = request.responseText;
			} else {
				alert("發生錯誤: " + request.status);
			}
		}
	}
}

document.getElementById("WlanEnumInterfaces").onclick = function() {
//alert("WlanGetAvailableNetworkList ");
	// 發送 Ajax 查詢請求並處理
	var request = new XMLHttpRequest();
	
	request.open("GET", "/enumInterfaces");//scofield
	
	request.send();

	request.onreadystatechange = function() {
		// 伺服器請求完成
		if (request.readyState === 4) {
			// 伺服器回應成功
			if (request.status === 200) {
				document.getElementById("WlanResult").innerHTML = request.responseText;
			} else {
				alert("發生錯誤: " + request.status);
			}
		}
	}
}

document.getElementById("WlanGetNotifications").onclick = function() {
	// 發送 Ajax 查詢請求並處理
	var request = new XMLHttpRequest();
	
	request.open("GET", "/getNotifications");//scofield
	
	request.send();

	request.onreadystatechange = function() {
		// 伺服器請求完成
		if (request.readyState === 4) {
			// 伺服器回應成功
			if (request.status === 200) {
				document.getElementById("WlanResult").innerHTML = request.responseText;
			} else {
				alert("發生錯誤: " + request.status);
			}
		}
	}
}

document.getElementById("clear_WlanGetAvailableNetworkList").onclick = function() {
alert("clear_WlanGetAvailableNetworkList ");
	document.getElementById("result_WlanGetAvailableNetworkList").innerHTML = '';
}

function WlanEnumInterfaces() {
//alert("WlanEnumInterfaces by JavaScript ");
	// 發送 Ajax 查詢請求並處理
	var request = new XMLHttpRequest();
	
	request.open("GET", "/enumInterfaces");//scofield
	
	request.send();

	request.onreadystatechange = function() {
		// 伺服器請求完成
		if (request.readyState === 4) {
			// 伺服器回應成功
			if (request.status === 200) {
				document.getElementById("WlanOnLoad").innerHTML = request.responseText;
			} else {
				alert("發生錯誤: " + request.status);
			}
		}
	}
}

</script>


</body>
</html>

